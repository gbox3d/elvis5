<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title></title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=no">

  <title> welcome to webgl </title>

</head>

<body style="margin: 0px;" >

<div >

  <div id='mycanvas' style="
    width: 512px;height: 512px;" >
  </div>
  <ul>
    <li> <a href="./exam.2.gl" > GL </a> </li>
    <li> <a href="./exam.7.2d_effect" > 2D Texture Effect </a> </li>
  </ul>

</div>

<script type="module" >

  import * as THREE from './libs/threejs/build/three.module.js';
  import {OrbitControls} from './libs/threejs/plugin/jsm/controls/OrbitControls.js';
  import {elvis5} from "./libs/elvis5/jsm/core.js";

  var Smgr = new  elvis5.scene.SceneManager({
    camera : {
      fov : 45,
      far : 5000,
      near : 1,
      position : new THREE.Vector3(5, 10, 10),
      lookat : new THREE.Vector3()

    },
    renderer : {
      type : 'webgl',
      container : document.querySelector('#mycanvas'),
      clear : {
        color : 0x000000
      }

    },
    setup : function() {

      //그리드헬퍼
      let helper =  new THREE.GridHelper( 64, 8 );
      this.scene.add(helper);

      //오빗컨트롤
      //카메라의 현재 위치 기준으로 시작한다.
      var controls = new OrbitControls( this.camera , this.renderer.domElement);
      controls.target.set( 0, 0, 0 ); //바라보는 위치
      controls.update();

      //씬노드 추가
      var geometry = new THREE.CubeGeometry(1,1,1);
      var material = new THREE.MeshBasicMaterial(
        {
          color: 0x00ff00,
          wireframe : true

        }
      );
      var node = new THREE.Mesh(geometry, material);

      node.name = 'wire_cube';

      this.scene.add(node);
    },
    event : {
      onWindowResize : function(evt) {


        if(this.window_size) { //창모드일경우

        }
        else { //전체 화면일경우
          this.updateAll({
            resize : {
              width :  window.innerWidth,
              height : window.innerHeight
            }
          });
        }
      },
      onMouseMove : function(event) {

        // var mx = ( event.offsetX / this.window_size.width ) * 2 - 1;
        // var my = - ( event.offsetY / this.window_size.height ) * 2 + 1;

      },
      onKeyDown : function(event) {

        console.log(event);

      },
      onMouseDown : function(event) {

      },
      onUpdate : function(event) {

        /*
         event 인자
         deltaTick : 루프지연시간 (ms)
         */

        //console.log(event);
        this.updateAll();


      }
    }
  });




</script>

</body>
</html>