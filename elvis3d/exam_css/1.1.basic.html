<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=no">

    <title>basic</title>

    <script src='../libs/extra/jquery-2.0.3.min.js'></script>

    <script src='../libs/threejs/three.js'></script>
    <script src='../libs/threejs/js/renderers/CSS3DRenderer.js'></script>
    <script src="../libs/threejs/js/controls/TrackballControls.js"></script>
    <script src="../libs/threejs/js/libs/tween.min.js"></script>

    <script src="../libs/ramb3d/core.js"></script>
    <script src="../libs/ramb3d/util.js"></script>

</head>

<body style="margin: 0px;">

<div id="container"></div>

<script>

    var Smgr = new ramb3d.scene.SceneManager({
        camera : {
            fov : 45,
            far : 5000,
            near : 1,
            position : new THREE.Vector3(0, 0, 1500),
            lookat : new THREE.Vector3()

        },
        renderer : {
            type : 'css3',
            bkg_color : '#bbbbbb'
        },
        setup : function() {

            //초기화 코드는 여기에서 코딩한다.

            var context = this;

            //그리드헬퍼
            var image = document.createElement( 'img' );
            var object;
            image.addEventListener( 'load', function ( event ) {

                console.log('load success');
                object = new THREE.CSS3DObject( image.cloneNode() );
                object.position.set(0,0,0);
                //object.rotation.x = THREE.Math.degToRad(45);
                context.scene.add( object );


                new TWEEN.Tween( object.rotation )
                        .to( {
                            x: THREE.Math.degToRad(-65),
                            y: 0,
                            z: 0
                        }, 1000)
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();


            }, false );
            image.src = '../res/RTS_Crate.png';

            //컨트롤러
            context.controls = new THREE.TrackballControls( context.camera, context.renderer.domElement );
            context.controls.rotateSpeed = 0.5;

        },
        event : {
            onWindowResize : function() {
                //동적으로 창의 크기가 바뀌면 이부분이 콜백된다.
                this.updateAll({
                    resize : {
                        width :  window.innerWidth,
                        height : window.innerHeight
                    }
                });
            },
            onUpdate : function(event) {

                TWEEN.update();
                this.controls.update();

                this.updateAll();
            },
            onMouseMove : function(event) {

                //var mx = ( event.offsetX / this.window_size.width ) * 2 - 1;
                //var my = - ( event.offsetY / this.window_size.height ) * 2 + 1;

            },
            onKeyDown : function(event) {

                console.log(event);

            }
        }
    });


</script>


</body>
</html>